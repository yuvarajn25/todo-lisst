(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(21),s=n.n(a),o=(n(39),n(6)),i=n(34),d=n(13),u=(n(40),n(33)),j=Object(u.a)("https://fbubmiirtajrzslefjmy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYyMDEzNzgyNSwiZXhwIjoxOTM1NzEzODI1fQ.GjJeQFR4xIfE-T4HUa95FoqpCdHfyszRQ-Hsk3YZSNM"),p=n(1),b=n.n(p),O=n(12),l=n(5),f=n(16),h=n(7),m=function(e,t){return{type:"SHOW_NOTIFICATION",messageType:e,message:t}},v=n(3);var x=Object(h.b)()((function(e){var t=e.isLogin,n=e.dispatch,c=Object(l.g)();j.auth.session()&&c.push("/home");var r=function(){var e=Object(O.a)(b.a.mark((function e(r){var a,s,o,i,d,u,p,O;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),a=r.target,s=a.email.value,o=a.password.value,i={email:s,password:o},!t){e.next=12;break}return e.next=6,j.auth.signIn(i);case 6:d=e.sent,(u=d.error)&&n(m("error",u.message)),c.push("/home"),e.next=17;break;case 12:return e.next=14,j.auth.signUp(i);case 14:p=e.sent,(O=p.error)&&n(m("error",O.message));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{children:Object(v.jsx)("div",{className:"login",children:Object(v.jsxs)("form",{onSubmit:r,children:[Object(v.jsx)("input",{placeholder:"Email",className:"field",name:"email",type:"text"}),Object(v.jsx)("input",{placeholder:"Password",className:"field",name:"password",type:"password"}),Object(v.jsx)("input",{type:"submit",value:t?"Login":"Sign Up"}),Object(v.jsx)("div",{className:"signup",children:Object(v.jsx)(f.b,{to:t?"/signup":"/login",children:t?"do not have account? Signup here":"Already have account? Login here"})})]})})})})),g=n(30);var T=Object(h.b)()((function(e){var t=e.todo,n=e.onSave,r=e.onDelete,a=Object(c.useState)(t),s=Object(d.a)(a,2),i=s[0],u=s[1];return i?Object(v.jsxs)("div",{className:"task-item",children:[Object(v.jsx)("input",{type:"checkbox",checked:i.is_completed,onChange:function(e){i.is_completed||(i.completed_date=parseInt(Date.now()/1e3)),n(Object(o.a)(Object(o.a)({},i),{},{is_completed:!i.is_completed}))},style:i.id?{}:{visibility:"hidden"}}),Object(v.jsx)("input",{type:"text",value:i.task,onChange:function(e){u(Object(o.a)(Object(o.a)({},i),{},{task:e.target.value}))},onBlur:function(e){n(Object(o.a)({},i)),i.id||u(Object(o.a)(Object(o.a)({},i),{},{task:""}))},placeholder:i.id?"":"+ Add New"}),Object(v.jsx)(g.a,{onClick:function(){return r(i)},style:!i.id&&{visibility:"hidden"}})]}):Object(v.jsx)("div",{})})),y=function(e){return function(){var t=Object(O.a)(b.a.mark((function t(n,c){var r,a,s,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.task){t.next=2;break}return t.abrupt("return");case 2:return r=j.auth.user(),e.id||(e.created_date=parseInt(Date.now()/1e3)),t.next=6,j.from("to_do").insert([Object(o.a)(Object(o.a)({},e),{},{created_by_id:r.id})],{upsert:!0});case 6:a=t.sent,s=a.data,(i=a.error)&&n(m("error",i.message)),n({type:"SAVE_TODO",todo:s[0]});case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(O.a)(b.a.mark((function t(n,c){var r,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.from("to_do").delete().eq("id",e.id);case 2:r=t.sent,(a=r.error)&&n(m("error",a.message)),n(_(e.is_completed));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(O.a)(b.a.mark((function t(n,c){var r,a,s,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=j.auth.user(),t.next=3,j.from("to_do").select("*").eq("is_completed",e).eq("created_by_id",r.id).order("created_date",{ascending:!0});case 3:a=t.sent,s=a.data,(o=a.error)&&n(m("error",o.message)),n({type:"SET_TODO",todos:s,isCompleted:e});case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()};var k=Object(h.b)((function(e,t){var n=e.todo;return{todos:t.isCompleted?n.completedTodos:n.pendingTodos}}))((function(e){var t=e.dispatch,n=e.header,r=e.isCompleted,a=e.todos,s=void 0===a?[]:a,o=Object(c.useState)(!1),i=Object(d.a)(o,2),u=i[0],j=i[1];Object(c.useEffect)(Object(O.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:t(_(r)),j(!0);case 4:case"end":return e.stop()}}),e)}))));var p=function(){var e=Object(O.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.task){e.next=2;break}return e.abrupt("return");case 2:n.id||(n.created_date=parseInt(Date.now()/1e3)),t(y(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(O.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(I(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"todo-pending",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:n}),s.map((function(e){return Object(v.jsx)(T,{todo:e,onSave:p,onDelete:l},e.id)})),!r&&Object(v.jsx)(T,{todo:{is_completed:!1,task:""},onSave:p,onDelete:l},0)]})})}));var w=Object(h.b)()((function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(k,{header:"Pending Tasks",isCompleted:!1}),Object(v.jsx)(k,{header:"Completed Tasks",isCompleted:!0})]})})),N=n(31);var C=Object(h.b)()((function(e){var t=e.dispatch;return Object(v.jsxs)("div",{className:"nav",children:[Object(v.jsx)("div",{}),Object(v.jsx)("div",{className:"appname",children:Object(v.jsx)(f.b,{to:"/home",children:"TODO List"})}),Object(v.jsx)("div",{className:"action",children:Object(v.jsx)(N.a,{onClick:function(){var e=j.auth.signOut().error;t(e?m("error",e.message):m("success","Logged Out"))}})})]})})),E=Object(h.b)((function(e){return e.notification}))((function(e){var t=e.isEnable,n=e.type,r=e.message,a=e.dispatch;Object(c.useEffect)((function(){t&&setTimeout((function(){a({type:"HIDE_NOTIFICATION"})}),1500)}),[a,t]);var s=t?"notification ".concat(n,"-notification"):"notification";return Object(v.jsx)("div",{className:s,children:Object(v.jsx)("p",{children:r})})})),S=n(19),D=n(32),F={isEnable:!0,messageType:"",message:""},L=n(23),A=n(20),z={pendingTodos:[],completedTodos:[]},H=function(e,t){var n=e.findIndex((function(e){return e.id===t}));n>-1&&e.splice(n,1)},J=function(e,t){var n=e.findIndex((function(e){return e.id===t.id}));n>-1?e[n]=t:e.push(t)},M=Object(S.b)({todo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_TODO":var n=t.todo;return J(n.is_completed?e.completedTodos:e.pendingTodos,n),H(n.is_completed?e.pendingTodos:e.completedTodos,n.id),{pendingTodos:Object(A.a)(e.pendingTodos),completedTodos:Object(A.a)(e.completedTodos)};case"DELETE_TODO":var c=t.todo;return H(c.is_completed?e.completedTodos:e.pendingTodos,c.id),{pendingTodos:Object(A.a)(e.pendingTodos),completedTodos:Object(A.a)(e.completedTodos)};case"SET_TODO":var r=t.todos,a=t.isCompleted;return Object(o.a)(Object(o.a)({},e),{},Object(L.a)({},a?"completedTodos":"pendingTodos",r));default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_NOTIFICATION":return{isEnable:!0,type:t.messageType,message:t.message};case"HIDE_NOTIFICATION":return Object(o.a)(Object(o.a)({},e),{},{isEnable:!1});default:return e}}}),q=Object(S.c)(M,Object(S.a)(D.a));var P=function(){var e=Object(c.useState)(j.auth.session()),t=Object(d.a)(e,2),n=t[0],r=t[1];j.auth.onAuthStateChange((function(e,t){r(t)}));var a=function(e){var t=e.component,c=Object(i.a)(e,["component"]);return Object(v.jsx)(l.b,Object(o.a)(Object(o.a)({},c),{},{render:function(e){return n?Object(v.jsxs)("div",{children:[Object(v.jsx)(C,{}),Object(v.jsx)(t,Object(o.a)({},e))]}):Object(v.jsx)(l.a,{to:"/login"})}}))};return Object(v.jsx)(h.a,{store:q,children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)(E,{}),Object(v.jsxs)(l.d,{children:[Object(v.jsx)(l.b,{exact:!0,path:"/",render:function(){return n?Object(v.jsx)(l.a,{to:"/home"}):Object(v.jsx)(l.a,{to:"/login"})}}),Object(v.jsx)(l.b,{exact:!0,path:"/login",children:Object(v.jsx)(x,{isLogin:!0})}),Object(v.jsx)(l.b,{exact:!0,path:"/signup",children:Object(v.jsx)(x,{isLogin:!1})}),Object(v.jsx)(a,{exact:!0,path:"/home",component:w})]})]})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(P,{})}),document.getElementById("root")),U()}},[[51,1,2]]]);
//# sourceMappingURL=main.46158b2e.chunk.js.map